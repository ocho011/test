{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "프로젝트 초기 설정 및 환경 구성",
        "description": "Python 기반 자동매매 시스템의 기본 프로젝트 구조 설정 및 의존성 관리",
        "details": "Python 3.9+ 환경에서 poetry 또는 pip-tools를 사용한 의존성 관리 설정. 주요 라이브러리: python-binance>=1.0.19 (공식 바이낸스 API), asyncio, aiohttp>=3.9.0, pydantic>=2.0 (설정 관리), discord.py>=2.3.0 (알림), pandas>=2.1.0 (데이터 처리), numpy>=1.24.0, pytest>=7.4.0 (테스팅). 프로젝트 디렉토리 구조: src/trading_bot (메인 소스), tests/ (테스트), config/ (설정 파일), logs/ (로그), data/ (히스토리컬 데이터). .env 파일로 API 키 관리, pyproject.toml로 의존성 정의.",
        "testStrategy": "의존성 설치 확인, 기본 프로젝트 구조 검증, 환경변수 로딩 테스트",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Python 프로젝트 기본 구조 생성",
            "description": "pyproject.toml 설정 및 기본 디렉토리 구조 생성",
            "dependencies": [],
            "details": "Poetry를 사용한 프로젝트 초기화, pyproject.toml 작성으로 프로젝트 메타데이터 및 기본 설정 구성. src/trading_bot (메인 소스코드), tests/ (테스트 코드), config/ (설정 파일), logs/ (로그 파일), data/ (히스토리컬 데이터) 디렉토리 구조 생성. __init__.py 파일들을 적절한 위치에 배치하여 Python 패키지 구조 완성.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "의존성 라이브러리 정의 및 설치",
            "description": "자동매매 시스템에 필요한 핵심 라이브러리들 pyproject.toml에 정의",
            "dependencies": [],
            "details": "python-binance>=1.0.19, asyncio, aiohttp>=3.9.0, pydantic>=2.0, discord.py>=2.3.0, pandas>=2.1.0, numpy>=1.24.0, pytest>=7.4.0 등 핵심 라이브러리를 pyproject.toml의 dependencies 섹션에 정의. 개발용 의존성 (black, flake8, mypy 등)도 dev-dependencies에 추가. poetry install 명령으로 가상환경 생성 및 의존성 설치 확인.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "환경 설정 파일 템플릿 작성",
            "description": ".env 파일 템플릿 및 설정 관리 시스템 구축",
            "dependencies": [],
            "details": ".env.example 파일 생성으로 필요한 환경변수 템플릿 제공 (BINANCE_API_KEY, BINANCE_SECRET_KEY, DISCORD_WEBHOOK_URL 등). .env 파일은 .gitignore에 추가하여 보안 유지. pydantic Settings 클래스를 사용한 환경변수 검증 및 타입 안전성 확보. config/settings.py에서 모든 설정을 중앙 집중 관리.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "프로젝트 초기화 검증 및 기본 테스트",
            "description": "설정된 프로젝트 구조와 의존성이 올바르게 작동하는지 검증",
            "dependencies": [],
            "details": "pytest를 사용한 기본 테스트 케이스 작성으로 프로젝트 초기화 상태 검증. 의존성 import 테스트, 환경변수 로딩 테스트, 기본 디렉토리 존재 확인 테스트 구현. poetry run pytest 명령으로 전체 테스트 실행 확인. pre-commit 훅 설정으로 코드 품질 자동 검사 체계 구축.",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 2,
        "title": "이벤트 기반 아키텍처 프레임워크 구축",
        "description": "비동기 이벤트 버스 및 메시지 허브를 중심으로 한 느슨한 결합 아키텍처 설계",
        "details": "EventBus 클래스로 발행-구독 패턴 구현. asyncio.Queue 기반 비동기 메시지 처리. 이벤트 타입: MarketDataEvent, SignalEvent, OrderEvent, RiskEvent. MessageHub가 모든 컴포넌트 간 통신 조율. 이벤트 직렬화/역직렬화를 위한 pydantic 모델 사용. 컴포넌트 간 의존성 주입을 위한 DI 컨테이너 구현. 각 컴포넌트는 BaseComponent 추상 클래스 상속하여 일관된 인터페이스 제공.",
        "testStrategy": "이벤트 발행/구독 테스트, 비동기 메시지 처리 성능 테스트, 컴포넌트 간 통신 검증",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "BaseComponent 추상 클래스 설계 및 구현",
            "description": "모든 시스템 컴포넌트가 상속받을 기본 인터페이스 클래스 설계",
            "dependencies": [],
            "details": "BaseComponent 추상 클래스 정의. start(), stop(), is_running() 메서드 포함. 컴포넌트 라이프사이클 관리를 위한 상태 관리. 로깅 및 에러 핸들링 기본 기능 제공. 컴포넌트 간 표준화된 인터페이스 보장.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "이벤트 타입 및 모델 정의",
            "description": "시스템에서 사용할 이벤트 타입들과 pydantic 모델 정의",
            "dependencies": [
              "2.1"
            ],
            "details": "MarketDataEvent, SignalEvent, OrderEvent, RiskEvent 클래스 정의. pydantic 기반 이벤트 직렬화/역직렬화 모델. 이벤트 메타데이터(타임스탬프, 우선순위 등) 포함. 이벤트 검증 로직 구현.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "EventBus 발행-구독 패턴 구현",
            "description": "asyncio 기반 비동기 이벤트 발행 및 구독 시스템 구축",
            "dependencies": [
              "2.2"
            ],
            "details": "EventBus 클래스 구현. subscribe(), unsubscribe(), publish() 메서드. asyncio.Queue 기반 비동기 메시지 처리. 이벤트 타입별 구독자 관리. 이벤트 필터링 및 라우팅 기능.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "MessageHub 중앙 통신 허브 개발",
            "description": "모든 컴포넌트 간 통신을 조율하는 중앙 메시지 허브 구현",
            "dependencies": [
              "2.3"
            ],
            "details": "MessageHub 클래스로 컴포넌트 간 통신 중재. 메시지 라우팅 및 변환 기능. 통신 상태 모니터링 및 로깅. 메시지 큐 관리 및 백프레셔 처리. 컴포넌트 등록/해제 관리.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 5,
            "title": "의존성 주입(DI) 컨테이너 구현",
            "description": "컴포넌트 간 의존성 관리를 위한 DI 컨테이너 시스템 구축",
            "dependencies": [
              "2.1"
            ],
            "details": "DIContainer 클래스 구현. 컴포넌트 등록 및 자동 해결. 싱글톤 및 트랜지언트 라이프사이클 지원. 순환 의존성 감지 및 방지. 런타임 의존성 주입 기능.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 6,
            "title": "컴포넌트 라이프사이클 관리 시스템",
            "description": "컴포넌트의 시작, 정지, 재시작을 관리하는 라이프사이클 매니저 구현",
            "dependencies": [
              "2.4",
              "2.5"
            ],
            "details": "ComponentLifecycleManager 클래스 구현. 컴포넌트 시작 순서 및 의존성 기반 초기화. 우아한 종료(graceful shutdown) 처리. 컴포넌트 헬스체크 및 자동 재시작. 라이프사이클 이벤트 발행 및 모니터링.",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 3,
        "title": "바이낸스 API 연동 및 시장 데이터 수신 모듈",
        "description": "바이낸스 선물 거래소 API 연동 및 실시간 시장 데이터 수신 시스템 구축",
        "details": "BinanceClient 클래스로 python-binance 라이브러리 래핑. WebSocket을 통한 실시간 캔들 데이터 수신 (5분, 15분, 4시간, 일봉). MarketDataProvider 컴포넌트로 데이터 정규화 및 이벤트 발행. 연결 끊김 시 자동 재연결 로직 (exponential backoff). API 레이트 리미트 관리 (분당 1200 요청). 히스토리컬 데이터 캐싱을 위한 파일 시스템 기반 저장소. asyncio.Semaphore로 동시 요청 수 제한.",
        "testStrategy": "WebSocket 연결 안정성 테스트, API 레이트 리미트 테스트, 데이터 무결성 검증",
        "priority": "high",
        "dependencies": [
          2
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "BinanceClient 래퍼 클래스 구현",
            "description": "python-binance 라이브러리를 래핑하는 BinanceClient 클래스 구현",
            "dependencies": [],
            "details": "python-binance 라이브러리를 래핑하여 선물 거래소 API 인터페이스 제공. 비동기 메서드로 시장 데이터 요청, 주문 관리, 계정 정보 조회 기능 구현. 에러 핸들링 및 로깅 기능 포함",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "WebSocket 실시간 데이터 수신 시스템",
            "description": "실시간 캔들 데이터 수신을 위한 WebSocket 연결 및 데이터 처리",
            "dependencies": [
              "3.1"
            ],
            "details": "5분, 15분, 4시간, 일봉 캔들 데이터를 WebSocket으로 실시간 수신. MarketDataProvider 컴포넌트로 데이터 정규화 및 이벤트 발행. 멀티플 심볼 동시 구독 지원",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "자동 재연결 로직 구현",
            "description": "WebSocket 연결 끊김 시 exponential backoff 기반 자동 재연결",
            "dependencies": [
              "3.2"
            ],
            "details": "네트워크 연결 장애 시 exponential backoff 알고리즘으로 재연결 시도. 최대 재시도 횟수 및 대기 시간 설정 가능. 연결 상태 모니터링 및 알림 기능",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "API 레이트 리미트 관리 시스템",
            "description": "바이낸스 API 호출 제한 관리 및 요청 큐잉",
            "dependencies": [
              "3.1"
            ],
            "details": "분당 1200 요청 제한 준수를 위한 레이트 리미터 구현. asyncio.Semaphore로 동시 요청 수 제한. 요청 우선순위 큐 및 대기열 관리",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 5,
            "title": "히스토리컬 데이터 캐싱 시스템",
            "description": "파일 시스템 기반 히스토리컬 데이터 저장 및 관리",
            "dependencies": [
              "3.1"
            ],
            "details": "파일 시스템 기반 히스토리컬 캔들 데이터 캐싱. 데이터 무결성 검증 및 중복 제거. 압축 저장으로 디스크 사용량 최적화. 캐시 만료 정책 및 자동 정리 기능",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 4,
        "title": "ICT 기술적 분석 엔진 개발",
        "description": "Order Block, Fair Value Gap 감지 및 다중 시간대 구조 분석 알고리즘 구현",
        "details": "TechnicalAnalyzer 클래스로 ICT 패턴 분석. OrderBlockDetector: 스윙 하이/로우 기반 주문 블록 식별, 최소 3개 캔들 후 유효성 확인. FairValueGapAnalyzer: 갭 크기 및 방향성 분석, 50% 이상 채워지면 무효화. MarketStructureAnalyzer: BOS(Break of Structure), CHoCH(Change of Character) 감지. 다중 시간대 분석을 위한 TimeFrameManager. pandas를 이용한 기술적 지표 계산. numpy 기반 고성능 수치 연산.",
        "testStrategy": "히스토리컬 데이터 기반 패턴 감지 정확도 테스트, 실시간 분석 성능 측정",
        "priority": "high",
        "dependencies": [
          3
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "OrderBlockDetector 스윙 하이/로우 분석 모듈 개발",
            "description": "스윙 하이/로우를 기반으로 주문 블록을 식별하는 OrderBlockDetector 클래스 구현",
            "dependencies": [],
            "details": "스윙 하이/로우 감지 알고리즘 구현, 최소 3개 캔들 후 유효성 확인 로직, 주문 블록 형성 조건 검증, 히스토리컬 데이터 기반 패턴 매칭, numpy 배열 기반 고성능 계산 최적화",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "FairValueGapAnalyzer 갭 감지 및 무효화 로직 구현",
            "description": "Fair Value Gap의 감지, 크기 분석, 방향성 판단 및 무효화 조건을 처리하는 분석기 개발",
            "dependencies": [],
            "details": "갭 크기 및 방향성 분석 알고리즘, 50% 이상 채워짐 감지 시 무효화 로직, 갭의 품질 평가 지표, 다양한 시간대에서의 갭 유효성 검증, 실시간 갭 상태 모니터링",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "MarketStructureAnalyzer BOS/CHoCH 감지 시스템 개발",
            "description": "Break of Structure와 Change of Character를 감지하여 시장 구조 변화를 분석하는 시스템 구현",
            "dependencies": [],
            "details": "BOS(Break of Structure) 감지 알고리즘, CHoCH(Change of Character) 식별 로직, 시장 구조 변화 패턴 분석, 구조적 레벨 브레이크 확인, 추세 변화 신호 생성",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "TimeFrameManager 다중 시간대 처리 엔진 구축",
            "description": "여러 시간대의 데이터를 동시에 처리하고 분석할 수 있는 다중 시간대 관리 시스템 개발",
            "dependencies": [],
            "details": "다중 시간대 데이터 동기화, 시간대별 분석 결과 통합, 상위 시간대 바이어스 적용, 시간대 간 confluence 검증, 메모리 효율적인 데이터 저장 구조",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 5,
            "title": "기술적 지표 계산 및 ICT 패턴 통합 모듈",
            "description": "pandas 기반 기술적 지표 계산과 ICT 패턴 분석을 통합하는 계산 엔진 개발",
            "dependencies": [
              "4.1",
              "4.2",
              "4.3"
            ],
            "details": "pandas 기반 기술적 지표 라이브러리 통합, ICT 패턴과 전통 지표의 융합 분석, 지표 계산 파이프라인 최적화, 실시간 지표 업데이트 시스템, 메모리 사용량 최적화",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 6,
            "title": "패턴 검증 및 신뢰도 평가 시스템",
            "description": "감지된 ICT 패턴의 유효성을 검증하고 신뢰도를 평가하는 검증 시스템 구현",
            "dependencies": [
              "4.1",
              "4.2",
              "4.3",
              "4.4"
            ],
            "details": "패턴 신뢰도 점수 계산 알고리즘, 히스토리컬 백테스트 기반 검증, 패턴 성공률 통계 분석, 거짓 신호 필터링 로직, 패턴 품질 등급 분류 시스템",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 7,
            "title": "분석 엔진 성능 최적화 및 TechnicalAnalyzer 통합",
            "description": "모든 분석 모듈을 통합하는 TechnicalAnalyzer 클래스 구현 및 전체적인 성능 최적화",
            "dependencies": [
              "4.1",
              "4.2",
              "4.3",
              "4.4",
              "4.5",
              "4.6"
            ],
            "details": "TechnicalAnalyzer 메인 클래스 구현, 모든 분석 모듈 통합 및 조율, numpy 기반 벡터화 연산 최적화, 메모리 관리 및 가비지 컬렉션 최적화, 실시간 분석 성능 벤치마크",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 5,
        "title": "매매 신호 생성 및 검증 시스템",
        "description": "ICT 패턴 조합을 통한 매매 신호 생성 및 confluence 검증 로직 구현",
        "details": "SignalGenerator 클래스로 매매 신호 생성. ConfluenceValidator: 최소 2-3개 confluence 요구 (Order Block + FVG + 시장 구조). SignalStrengthCalculator: 신호 강도 점수화 (0-100). 시간대별 바이어스 확인 로직. 거짓 신호 필터링을 위한 백테스트 기반 임계값 설정. SignalEvent 발행 시 진입가, 스탑로스, 익절가 포함. 신호 유효성 시간 제한 (5분 내 미체결 시 취소).",
        "testStrategy": "신호 정확도 백테스트, confluence 검증 로직 테스트, 신호 생성 지연시간 측정",
        "priority": "high",
        "dependencies": [
          4
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "SignalGenerator 핵심 클래스 구현",
            "description": "ICT 패턴 조합을 통한 매매 신호 생성 로직의 핵심 클래스 구현",
            "dependencies": [],
            "details": "SignalGenerator 클래스 설계 및 구현. ICT 패턴(Order Block, FVG, 시장 구조) 입력을 받아 매매 신호 생성. 신호 타입(롱/숏) 결정 로직. 기본적인 신호 생성 알고리즘 구현. 패턴 조합 우선순위 정의.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "ConfluenceValidator 다중 조건 검증 시스템",
            "description": "최소 2-3개 confluence 요구사항을 검증하는 시스템 구현",
            "dependencies": [
              "5.1"
            ],
            "details": "ConfluenceValidator 클래스 구현. Order Block + FVG + 시장 구조 조합 검증. 최소 confluence 개수 확인 로직. 각 패턴의 신뢰도 가중치 적용. 패턴 간 시간적/공간적 일치성 검증.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "SignalStrengthCalculator 점수화 시스템",
            "description": "신호 강도를 0-100 점수로 계산하는 시스템 구현",
            "dependencies": [
              "5.2"
            ],
            "details": "SignalStrengthCalculator 클래스 구현. confluence 개수, 패턴 신뢰도, 시장 조건을 종합한 점수 계산. 0-100 스케일의 신호 강도 산출. 점수 가중치 조정 가능한 파라미터 시스템. 점수 기반 신호 등급 분류.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "시간대별 바이어스 확인 및 거짓 신호 필터링",
            "description": "시간대별 시장 바이어스 확인과 백테스트 기반 거짓 신호 필터링 로직 구현",
            "dependencies": [
              "5.3"
            ],
            "details": "시간대별 바이어스 확인 로직 구현. 아시아/런던/뉴욕 세션별 특성 반영. 백테스트 기반 임계값 설정 시스템. 거짓 신호 패턴 학습 및 필터링. 시장 변동성 기반 신호 조정.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 5,
            "title": "SignalEvent 발행 및 가격 계산 시스템",
            "description": "진입가, 스탑로스, 익절가를 포함한 SignalEvent 발행 시스템 구현",
            "dependencies": [
              "5.4"
            ],
            "details": "SignalEvent 클래스 정의 및 발행 로직. 진입가 계산 알고리즘. 리스크 기반 스탑로스 계산. 수익률 목표 기반 익절가 설정. 이벤트 버스를 통한 신호 전파. 신호 메타데이터 포함.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 6,
            "title": "신호 유효성 관리 및 타임아웃 시스템",
            "description": "신호 유효성 시간 제한과 5분 내 미체결 시 취소하는 관리 시스템 구현",
            "dependencies": [
              "5.5"
            ],
            "details": "신호 유효성 타이머 관리 시스템. 5분 유효성 시간 제한 구현. 미체결 신호 자동 취소 로직. 신호 상태 추적 및 업데이트. 만료된 신호 정리 및 알림. 유효성 시간 설정 가능한 파라미터 시스템.",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 6,
        "title": "리스크 관리 시스템 구현",
        "description": "포지션 크기 계산, 손실 한도 관리 및 드로우다운 제어 시스템 구축",
        "details": "RiskManager 클래스로 종합적 위험 관리. PositionSizeCalculator: 계좌 잔고의 2% 위험 기준 포지션 크기 계산. DrawdownController: 일일 5%, 월간 15% 드로우다운 제한. ConsecutiveLossTracker: 3회 연속 손실 시 거래 중단. VolatilityFilter: ATR 기반 비정상 변동성 감지. 일일 최대 5회 거래 제한. Kelly Criterion 적용 옵션. 실시간 위험 지표 모니터링.",
        "testStrategy": "포지션 크기 계산 정확성 테스트, 드로우다운 제한 시뮬레이션, 연속 손실 제어 검증",
        "priority": "high",
        "dependencies": [
          5
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "PositionSizeCalculator 구현",
            "description": "계좌 잔고의 2% 위험 기준으로 포지션 크기를 계산하는 모듈 개발",
            "dependencies": [],
            "details": "계좌 잔고 대비 2% 위험 한도 기준 포지션 크기 계산 로직 구현. Kelly Criterion 적용 옵션 포함. 스탑로스 거리와 위험 허용도를 고려한 정확한 포지션 사이즈 산출",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "DrawdownController 구현",
            "description": "일일 5%, 월간 15% 드로우다운 제한을 관리하는 제어 시스템 구축",
            "dependencies": [],
            "details": "실시간 드로우다운 모니터링 및 제한 적용. 일일/월간 손실 한도 도달 시 자동 거래 중단. 드로우다운 계산 및 복구 추적 기능",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "ConsecutiveLossTracker 구현",
            "description": "연속 손실 관리 및 3회 연속 손실 시 거래 중단 시스템 개발",
            "dependencies": [],
            "details": "연속 손실 거래 추적 및 카운팅. 3회 연속 손실 도달 시 자동 거래 중단 로직. 손실 패턴 분석 및 복구 조건 설정",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "VolatilityFilter 구현",
            "description": "ATR 기반 변동성 필터링 및 비정상 시장 상황 감지 시스템 구축",
            "dependencies": [],
            "details": "ATR(Average True Range) 기반 변동성 측정. 비정상적 변동성 감지 시 거래 제한. 일일 최대 5회 거래 제한 로직 포함",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 5,
            "title": "RiskManager 통합 및 실시간 모니터링",
            "description": "모든 리스크 관리 컴포넌트를 통합하고 실시간 위험 지표 모니터링 시스템 구현",
            "dependencies": [
              "6.1",
              "6.2",
              "6.3",
              "6.4"
            ],
            "details": "RiskManager 클래스로 모든 리스크 컴포넌트 통합. 실시간 위험 지표 계산 및 모니터링. 위험 이벤트 발생 시 즉시 알림 및 대응 시스템",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 7,
        "title": "주문 실행 및 포지션 관리 모듈",
        "description": "자동 주문 실행, 포지션 모니터링 및 부분 익절 시스템 구현",
        "details": "OrderExecutor 클래스로 주문 실행. MarketOrderManager와 LimitOrderManager로 주문 타입별 처리. PositionTracker: 실시간 미실현 손익 추적. PartialTakeProfitManager: 1:1 RR에서 50% 익절, 나머지는 1:2 RR. TrailingStopManager: 익절 구간에서 트레일링 스탑 적용. SlippageController: 슬리피지 모니터링 및 제한. OrderRetryHandler: 주문 실패 시 재시도 로직 (최대 3회).",
        "testStrategy": "주문 실행 성능 테스트, 포지션 추적 정확성 검증, 부분 익절 로직 시뮬레이션",
        "priority": "high",
        "dependencies": [
          6
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "OrderExecutor 주문 실행 엔진 구현",
            "description": "비동기 주문 실행 엔진과 기본 주문 실행 인터페이스 구현",
            "dependencies": [],
            "details": "OrderExecutor 클래스 구현으로 주문 실행의 핵심 로직 제공. 비동기 주문 처리, 주문 상태 추적, 주문 검증 로직 포함. 바이낸스 API와의 안전한 통신 인터페이스 구현",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "MarketOrderManager 및 LimitOrderManager 구현",
            "description": "시장가 주문과 지정가 주문의 타입별 처리 관리자 구현",
            "dependencies": [
              "7.1"
            ],
            "details": "MarketOrderManager로 시장가 주문의 즉시 실행 처리. LimitOrderManager로 지정가 주문의 체결 대기 및 모니터링. 각 주문 타입별 특화된 로직과 검증 규칙 적용",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "PositionTracker 실시간 손익 추적 시스템",
            "description": "포지션의 실시간 미실현 손익 추적 및 상태 관리 구현",
            "dependencies": [
              "7.2"
            ],
            "details": "실시간 가격 데이터를 기반으로 포지션별 미실현 손익 계산. 포지션 상태(진입, 부분익절, 손절) 추적. 포지션 크기 및 평균 진입가 관리",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "PartialTakeProfitManager 부분 익절 로직 구현",
            "description": "1:1 RR에서 50% 익절, 나머지는 1:2 RR까지 유지하는 부분 익절 시스템",
            "dependencies": [
              "7.3"
            ],
            "details": "포지션 크기의 50%를 1:1 리스크 리워드 비율에서 자동 익절. 나머지 50%는 1:2 RR까지 유지하여 수익 극대화. 부분 익절 후 손절가 조정 로직 포함",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 5,
            "title": "TrailingStopManager 트레일링 스탑 시스템",
            "description": "익절 구간에서 수익을 보호하는 트레일링 스탑 메커니즘 구현",
            "dependencies": [
              "7.4"
            ],
            "details": "부분 익절 후 남은 포지션에 대한 트레일링 스탑 적용. 가격 움직임에 따른 동적 손절가 조정. 최대 수익 보호를 위한 스탑 레벨 관리",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 6,
            "title": "SlippageController 및 OrderRetryHandler 구현",
            "description": "슬리피지 모니터링과 주문 실패 시 재시도 로직 구현",
            "dependencies": [
              "7.5"
            ],
            "details": "SlippageController로 실제 체결가와 예상가의 차이 모니터링 및 허용 범위 제한. OrderRetryHandler로 주문 실패 시 최대 3회까지 자동 재시도. 네트워크 오류 및 API 제한 대응 로직",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 8,
        "title": "Discord 알림 및 모니터링 시스템",
        "description": "실시간 거래 알림, 시스템 상태 모니터링 및 Discord 봇 연동",
        "details": "NotificationManager 클래스로 Discord 알림 처리. discord.py 라이브러리로 봇 구현. 알림 종류: 거래 진입/청산, 시스템 오류, 일일/주간 수익 요약. DiscordFormatter로 메시지 포맷팅 및 임베드 생성. 알림 우선순위 및 스팸 방지 로직. SystemHealthChecker: API 연결 상태, 메모리 사용량 모니터링. PerformanceReporter: 일일/주간/월간 성과 리포트 자동 생성. 알림 실패 시 로그 파일 백업.",
        "testStrategy": "Discord 봇 연결 테스트, 알림 발송 확인, 성과 리포트 정확성 검증",
        "priority": "medium",
        "dependencies": [
          7
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Discord 봇 기본 설정 및 연결",
            "description": "discord.py 라이브러리를 사용하여 Discord 봇을 생성하고 서버에 연결하는 기본 기능 구현",
            "dependencies": [],
            "details": "Discord 애플리케이션 생성, 봇 토큰 설정, discord.py 클라이언트 초기화, 봇 권한 설정, 기본 연결 및 상태 확인 기능 구현",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "NotificationManager 알림 처리 시스템",
            "description": "거래 진입/청산, 시스템 오류, 수익 요약 등 다양한 알림을 처리하는 NotificationManager 클래스 구현",
            "dependencies": [
              "8.1"
            ],
            "details": "알림 종류별 메시지 템플릿 정의, 알림 우선순위 시스템, 스팸 방지 로직, 알림 큐 관리, 실패 시 재시도 메커니즘 구현",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "DiscordFormatter 메시지 포맷팅",
            "description": "Discord 임베드 및 메시지 포맷팅을 담당하는 DiscordFormatter 클래스 구현",
            "dependencies": [
              "8.2"
            ],
            "details": "거래 알림용 임베드 템플릿, 색상 코딩 시스템, 차트 이미지 첨부 기능, 메시지 길이 제한 처리, 이모지 및 포맷팅 규칙 구현",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "SystemHealthChecker 및 PerformanceReporter 구현",
            "description": "시스템 상태 모니터링과 성과 리포트 생성을 위한 SystemHealthChecker와 PerformanceReporter 클래스 구현",
            "dependencies": [
              "8.3"
            ],
            "details": "API 연결 상태 모니터링, 메모리 사용량 체크, 시스템 헬스 체크, 일일/주간/월간 성과 리포트 자동 생성, 알림 실패 시 로그 백업 시스템 구현",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 9,
        "title": "설정 관리 및 로깅 시스템",
        "description": "YAML 기반 설정 관리, 구조화된 로깅 및 환경별 설정 분리",
        "details": "ConfigManager 클래스로 YAML 설정 파일 관리. 환경별 설정: development.yml, production.yml, testing.yml. pydantic으로 설정 검증 및 타입 체크. LogManager로 구조화된 로깅 (JSON 포맷). 로그 레벨: DEBUG, INFO, WARNING, ERROR, CRITICAL. 로그 로테이션 및 압축. 거래 이벤트 전용 트레이드 로그. 시스템 성능 메트릭 로깅. 민감 정보 마스킹 처리.",
        "testStrategy": "설정 파일 검증 테스트, 로그 포맷 확인, 로그 로테이션 동작 검증",
        "priority": "medium",
        "dependencies": [
          8
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "ConfigManager 및 YAML 설정 파일 구현",
            "description": "YAML 기반 설정 관리 시스템과 환경별 설정 파일 구조 구현",
            "dependencies": [],
            "details": "ConfigManager 클래스 구현으로 YAML 설정 파일 로딩 및 관리. 환경별 설정 파일 생성: development.yml, production.yml, testing.yml. pydantic 모델을 사용한 설정 검증 및 타입 체크. 환경 변수를 통한 설정 파일 자동 선택 기능. 설정 값 캐싱 및 런타임 설정 변경 지원.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "LogManager 구조화된 로깅 시스템 구현",
            "description": "JSON 포맷 기반의 구조화된 로깅 시스템 및 로그 레벨 관리",
            "dependencies": [
              "9.1"
            ],
            "details": "LogManager 클래스로 구조화된 로깅 구현. JSON 포맷으로 로그 출력 및 구조화. 로그 레벨 관리: DEBUG, INFO, WARNING, ERROR, CRITICAL. 컨텍스트 정보 포함한 로그 메시지 생성. 비동기 로깅 지원으로 성능 최적화. 로그 필터링 및 조건부 로깅 기능.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "로그 로테이션 및 압축 시스템 구현",
            "description": "로그 파일 자동 로테이션, 압축 및 보관 정책 구현",
            "dependencies": [
              "9.2"
            ],
            "details": "시간/크기 기반 로그 로테이션 구현. 오래된 로그 파일 자동 압축 기능. 로그 보관 정책 설정 (보관 기간, 최대 파일 수). 디스크 공간 모니터링 및 자동 정리. 거래 이벤트 전용 트레이드 로그 분리 관리. 시스템 성능 메트릭 전용 로그 생성.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "민감 정보 마스킹 및 보안 로깅 구현",
            "description": "API 키, 계정 정보 등 민감한 데이터의 자동 마스킹 처리",
            "dependencies": [
              "9.2"
            ],
            "details": "민감 정보 자동 탐지 및 마스킹 기능 구현. API 키, 계정 번호, 개인정보 등 패턴 기반 마스킹. 로그 출력 전 민감 정보 스크러빙. 보안 감사를 위한 별도 보안 로그 생성. 마스킹 규칙 설정 파일 관리. 디버깅 모드에서의 선택적 마스킹 해제 기능.",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 10,
        "title": "백테스팅 엔진 및 성과 분석 도구",
        "description": "히스토리컬 데이터 기반 전략 검증 및 성과 지표 계산 시스템",
        "details": "BacktestEngine 클래스로 히스토리컬 백테스트. 최소 6개월 데이터로 검증. PerformanceAnalyzer: 샤프 비율, 최대 드로우다운, 승률, 평균 손익비 계산. TradeAnalyzer: 거래별 상세 분석 및 패턴 인식. WalkForwardOptimizer: 워크 포워드 분석으로 파라미터 최적화. MonteCarloSimulator: 몬테카를로 시뮬레이션으로 위험 분석. 백테스트 결과 시각화를 위한 matplotlib 연동. CSV/JSON 형태 결과 내보내기.",
        "testStrategy": "백테스트 결과 정확성 검증, 성과 지표 계산 확인, 파라미터 최적화 테스트",
        "priority": "medium",
        "dependencies": [
          9
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "BacktestEngine 핵심 클래스 구현",
            "description": "히스토리컬 데이터 기반 백테스트 실행을 위한 핵심 엔진 클래스 개발",
            "dependencies": [],
            "details": "BacktestEngine 클래스 구현으로 히스토리컬 데이터 로딩, 시뮬레이션 실행, 거래 실행 로직 포함. 최소 6개월 데이터 검증 로직, 시간 기반 이벤트 처리, 포지션 추적 기능 구현. pandas DataFrame 기반 데이터 처리 및 메모리 최적화.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "PerformanceAnalyzer 성과 지표 계산 모듈",
            "description": "샤프 비율, 최대 드로우다운, 승률 등 핵심 성과 지표 계산 시스템 구축",
            "dependencies": [
              "10.1"
            ],
            "details": "PerformanceAnalyzer 클래스로 샤프 비율, 최대 드로우다운, 승률, 평균 손익비, 연간 수익률, 변동성 계산. 벤치마크 대비 성과 비교 기능. 일별/월별/연도별 성과 분석 및 통계적 유의성 검증.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "TradeAnalyzer 거래별 상세 분석 시스템",
            "description": "개별 거래의 상세 분석 및 패턴 인식을 위한 분석 도구 개발",
            "dependencies": [
              "10.1"
            ],
            "details": "TradeAnalyzer 클래스로 거래별 손익 분석, 보유 기간 분석, 진입/청산 패턴 인식. 연속 손실/이익 분석, 시간대별 거래 성과, 거래 빈도 최적화 분석. 거래 품질 스코어링 시스템 구현.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "WalkForwardOptimizer 파라미터 최적화 엔진",
            "description": "워크 포워드 분석을 통한 전략 파라미터 동적 최적화 시스템 구현",
            "dependencies": [
              "10.2",
              "10.3"
            ],
            "details": "WalkForwardOptimizer 클래스로 롤링 윈도우 기반 파라미터 최적화. 인샘플/아웃샘플 성과 비교, 과최적화 방지 로직. 다차원 파라미터 그리드 서치 및 유전 알고리즘 기반 최적화. 최적화 결과 안정성 검증.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 5,
            "title": "MonteCarloSimulator 위험 분석 시뮬레이터",
            "description": "몬테카를로 시뮬레이션을 통한 포트폴리오 위험 분석 및 확률적 성과 예측 시스템",
            "dependencies": [
              "10.2"
            ],
            "details": "MonteCarloSimulator 클래스로 확률적 수익률 시뮬레이션 실행. VaR(Value at Risk), CVaR 계산, 최대 손실 확률 분석. 부트스트랩 리샘플링 기반 성과 분포 생성. 위험 시나리오별 포트폴리오 스트레스 테스트.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 6,
            "title": "백테스트 결과 시각화 및 내보내기 시스템",
            "description": "백테스트 결과의 시각적 표현 및 다양한 형식으로 결과 내보내기 기능 구현",
            "dependencies": [
              "10.2",
              "10.3",
              "10.4",
              "10.5"
            ],
            "details": "matplotlib 기반 수익률 곡선, 드로우다운 차트, 거래 분포 시각화. 대화형 차트를 위한 plotly 연동. CSV/JSON/Excel 형식 결과 내보내기. 성과 리포트 자동 생성 및 PDF 출력 기능. 웹 대시보드용 API 엔드포인트 제공.",
            "status": "done",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 11,
        "title": "전략 추상화 및 확장 프레임워크",
        "description": "다양한 매매 전략을 플러그인 형태로 추가할 수 있는 확장 가능한 프레임워크",
        "details": "AbstractStrategy 기본 클래스로 전략 인터페이스 정의. ICTStrategy 클래스로 ICT 전략 구현. TraditionalIndicatorStrategy로 RSI, MACD 등 전통 지표 전략. StrategyRegistry로 전략 등록 및 선택. StrategySelector로 실시간 전략 교체. 전략별 파라미터 검증 및 최적화. StrategyPerformanceTracker로 전략별 성과 추적. A/B 테스팅을 위한 StrategyComparator. 전략 변경 시 다른 컴포넌트 영향 최소화.",
        "testStrategy": "전략 교체 테스트, 플러그인 로딩 검증, 전략별 성과 비교 확인",
        "priority": "medium",
        "dependencies": [
          10
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "AbstractStrategy 기본 클래스 구현",
            "description": "base_strategy.py - 추상 클래스, ComponentState, 생명주기 관리",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 2,
            "title": "ICTStrategy 구현",
            "description": "ict_strategy.py - Order Blocks, Fair Value Gaps, Market Structure 분석",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 3,
            "title": "TraditionalIndicatorStrategy 구현",
            "description": "traditional_strategy.py - RSI, MACD, Bollinger Bands 전통 지표 전략",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 4,
            "title": "StrategyRegistry 구현",
            "description": "strategy_registry.py - 플러그인 시스템, 전략 등록 및 동적 로딩",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 5,
            "title": "StrategySelector 구현",
            "description": "strategy_selector.py - 런타임 전략 교체 및 생명주기 관리",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 6,
            "title": "StrategyPerformanceTracker 구현",
            "description": "performance_tracker.py - 실시간 성과 메트릭 추적 및 분석",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 7,
            "title": "StrategyComparator 구현",
            "description": "comparator.py - A/B 테스팅, 통계적 유의성 검증, Champion/Challenger 패턴",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 8,
            "title": "StrategyOptimizer 구현",
            "description": "strategy_optimizer.py - Walk-forward 최적화, 파라미터 튜닝, 캐싱",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 9,
            "title": "IntegratedStrategySystem 구현",
            "description": "strategy_system_integration.py - 전체 시스템 통합 및 워크플로우",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 10,
            "title": "전략 프레임워크 통합 테스트",
            "description": "test_strategy_integration.py - 21개 테스트 케이스 (현재 15/21 통과)",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          }
        ]
      },
      {
        "id": 12,
        "title": "시스템 통합 및 배포 준비",
        "description": "전체 시스템 통합 테스트, 배포 자동화 및 운영 환경 설정",
        "details": "SystemIntegrator로 모든 컴포넌트 통합. Docker 컨테이너화로 일관된 배포 환경. docker-compose.yml로 서비스 오케스트레이션. Vultr VM 자동 설정 스크립트. systemd 서비스 등록으로 자동 시작/재시작. 헬스체크 엔드포인트 구현. 로그 집중화를 위한 로그 수집기. 배포 전 통합 테스트 자동화. 프로덕션 환경 모니터링 대시보드. 긴급 정지 및 복구 절차 문서화.",
        "testStrategy": "End-to-End 통합 테스트, 배포 프로세스 검증, 시스템 복구 시나리오 테스트",
        "priority": "high",
        "dependencies": [
          11
        ],
        "status": "pending",
        "subtasks": [
          {
            "id": 1,
            "title": "SystemIntegrator 및 메인 실행 파일 구현",
            "description": "전체 시스템의 진입점이 되는 main.py와 모든 컴포넌트를 통합 관리하는 SystemIntegrator 클래스 구현",
            "dependencies": [],
            "details": "src/trading_bot/main.py 생성으로 전체 시스템 진입점 마련. SystemIntegrator 클래스로 데이터 수집, 신호 생성, 주문 실행, 리스크 관리 컴포넌트 통합. 컴포넌트 초기화 순서 관리 및 의존성 주입 구현. 시스템 생명주기 관리 (start, stop, restart) 기능. 로컬과 VM 환경 모두에서 실행 가능한 구조로 설계.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "설정 파일 시스템 완성",
            "description": "환경별 설정 관리 및 민감 정보 보안을 위한 종합적인 설정 시스템 구축",
            "dependencies": [
              "12.1"
            ],
            "details": "config/trading_config.yaml 템플릿 생성으로 기본 설정 구조 정의. 환경별 설정 분리 (local, paper, production) 구현. API 키, 시크릿 등 민감 정보는 .env 파일로 분리 관리. 설정값 검증 로직 및 기본값 처리 메커니즘 구축. 설정 변경 시 시스템 재시작 없이 반영 가능한 핫 리로드 기능.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "로컬 실행 가이드 및 스크립트",
            "description": "개발자와 사용자를 위한 로컬 환경 실행 스크립트 및 문서 작성",
            "dependencies": [
              "12.2"
            ],
            "details": "scripts/run_local.sh로 로컬 개발 환경 실행 스크립트 작성. scripts/run_backtest.sh로 백테스팅 전용 실행 스크립트 구현. scripts/run_paper.sh로 페이퍼 트레이딩 모드 실행 스크립트 작성. docs/development.md로 개발자 가이드 문서 작성. 각 스크립트에 환경 검증 및 오류 처리 로직 포함.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "End-to-End 통합 테스트",
            "description": "전체 시스템 통합 및 컴포넌트 간 연동을 검증하는 종합 테스트 구축",
            "dependencies": [
              "12.3"
            ],
            "details": "pytest 기반 전체 시스템 통합 테스트 스위트 구현. 로컬에서 실행 가능한 E2E 테스트 환경 구축. 모든 컴포넌트 연동 검증 테스트 작성. 시뮬레이션 데이터를 활용한 전체 플로우 테스트 구현. 테스트 결과 리포팅 및 성능 메트릭 수집 기능.\n<info added on 2025-10-02T06:28:43.755Z>\n구현 완료 - 차단 요소 해결 진행 중: MockBinanceClient(4개 시나리오), EventCapture(이벤트 검증), PerformanceCollector(메트릭 수집), pytest 설정을 포함한 종합적인 E2E 테스트 인프라를 구축했습니다. 총 21개 테스트를 포함한 4개 테스트 파일을 생성했습니다. 10개의 import/config 문제를 수정했습니다. 현재 차단 요소: 설정 검증 문제 - config.data가 Pydantic 모델이 아닌 dict로 되어 있습니다. TradingBotConfig의 중첩 섹션이 모델로 검증되도록 수정이 필요합니다.\n</info added on 2025-10-02T06:28:43.755Z>\n<info added on 2025-10-02T06:40:15.173Z>\n설정 검증 수정 완료: TradingBotConfig의 중첩 섹션(DataConfig, RiskConfig, SignalsConfig, StrategiesConfig, ExecutionConfig)을 dict 대신 적절한 Pydantic 모델로 수정했습니다. SystemIntegrator 컴포넌트 초기화 문제 해결: DataCache 매개변수, MarketDataProvider 클라이언트 매개변수, ICTAnalyzer 초기화를 수정했습니다. BaseComponent가 아닌 클래스(DataCache, ICTAnalyzer)에 대한 lifecycle_manager 등록을 제거했습니다. 현재 차단 요소: SignalGenerator 초기화 시 예상치 못한 키워드 인수 'ict_analyzer' 오류가 발생하고 있어, system_integrator.py의 모든 나머지 컴포넌트 초기화를 체계적으로 수정해야 합니다.\n</info added on 2025-10-02T06:40:15.173Z>",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 5,
            "title": "Docker 컨테이너화",
            "description": "일관된 배포 환경을 위한 Docker 컨테이너 및 오케스트레이션 설정",
            "dependencies": [
              "12.4"
            ],
            "details": "멀티 스테이지 빌드를 활용한 Dockerfile 작성으로 최적화된 이미지 생성. docker-compose.yml 작성으로 서비스 오케스트레이션 구현. 개발/프로덕션 환경별 Docker 설정 분리. 로컬에서도 Docker로 테스트 가능한 개발 환경 구축. 컨테이너 간 네트워크 및 볼륨 관리 설정.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 6,
            "title": "헬스체크 및 모니터링 API",
            "description": "시스템 상태 모니터링을 위한 헬스체크 엔드포인트 및 상태 API 구현",
            "dependencies": [
              "12.5"
            ],
            "details": "/health, /ready 엔드포인트 구현으로 기본 헬스체크 제공. 시스템 상태 모니터링 API 구축. 컴포넌트별 개별 상태 체크 기능 구현. 실시간 메트릭 수집 및 노출 API 작성. 장애 감지 및 알림 연동을 위한 상태 정보 제공.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 7,
            "title": "Vultr VM 배포 스크립트",
            "description": "Vultr 클라우드 환경에서의 자동 배포 및 환경 설정 스크립트 구현",
            "dependencies": [
              "12.6"
            ],
            "details": "scripts/deploy.sh로 Vultr VM 자동 설정 스크립트 작성. Docker 및 필수 환경 자동 설치 스크립트 구현. SSH 키 기반 보안 접속 설정. 방화벽 및 보안 그룹 자동 설정. 배포 프로세스 자동화 및 롤백 기능 구현.",
            "status": "done",
            "testStrategy": ""
          },
          {
            "id": 8,
            "title": "systemd 서비스 등록",
            "description": "시스템 부팅 시 자동 실행 및 서비스 관리를 위한 systemd 설정",
            "dependencies": [
              "12.7",
              "13"
            ],
            "details": "trading-bot.service 파일 작성으로 systemd 서비스 정의. 자동 시작 및 재시작 설정 구현. 서비스 실패 시 복구 정책 설정. 로그 관리 및 회전 설정. 서비스 의존성 및 실행 순서 관리.",
            "status": "pending",
            "testStrategy": ""
          },
          {
            "id": 9,
            "title": "프로덕션 모니터링 설정",
            "description": "운영 환경에서의 시스템 모니터링 및 로그 관리 시스템 구축",
            "dependencies": [
              "12.8",
              "13"
            ],
            "details": "로그 집중화를 위한 로그 수집기 설정. 시스템 메트릭 수집 및 대시보드 구축. 알림 시스템 연동을 위한 모니터링 설정. 성능 지표 추적 및 리포팅 시스템. 장애 대응을 위한 로그 분석 및 검색 기능.",
            "status": "pending",
            "testStrategy": ""
          },
          {
            "id": 10,
            "title": "운영 문서 및 긴급 대응 절차",
            "description": "시스템 운영 및 긴급 상황 대응을 위한 종합 문서 및 절차 수립",
            "dependencies": [
              "12.9",
              "13"
            ],
            "details": "docs/deployment.md로 배포 가이드 문서 작성. docs/operations.md로 운영 매뉴얼 작성. scripts/emergency_stop.sh로 긴급 정지 스크립트 구현. 장애 복구 절차 및 체크리스트 문서화. 시스템 백업 및 복원 절차 수립.",
            "status": "pending",
            "testStrategy": ""
          }
        ]
      },
      {
        "id": 13,
        "title": "라이브 트레이딩 워크플로우 구현",
        "description": "이벤트 기반 워크플로우 연결: MarketData → ICT Analysis → Signal → Strategy → Order 체인 구현",
        "details": "현재 상태: 모든 개별 컴포넌트(ICTAnalyzer, SignalGenerator, Strategies, OrderExecutor)는 구현되어 있으나, 이벤트 핸들러가 없어서 서로 연결되지 않음.\n\n구현 필요사항:\n1. MarketDataEvent → CandleClosedEvent 변환 (MarketDataAggregator)\n2. CandleClosedEvent → ICT 분석 → SignalEvent (StrategyCoordinator)\n3. SignalEvent → 리스크 체크 → RiskApprovedOrderEvent (RiskManager)\n4. RiskApprovedOrderEvent → 주문 실행 (OrderExecutor)\n\n새 이벤트 타입:\n- CandleClosedEvent: 캔들이 종료되고 OHLCV 데이터가 준비됨\n- RiskApprovedOrderEvent: 리스크 체크를 통과한 주문\n\n새 컴포넌트:\n- MarketDataAggregator: 실시간 데이터를 OHLCV DataFrame으로 집계\n- StrategyCoordinator: 멀티 타임프레임 분석 조율 및 전략 실행",
        "testStrategy": "1. Dry-run 모드로 이벤트 체인 검증 (실제 주문 없이)\n2. 각 이벤트 핸들러의 단위 테스트\n3. 통합 테스트: 실제 시장 데이터 → 신호 생성 → 주문 검증\n4. 백테스팅 모드로 과거 데이터 재생 테스트",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "새 이벤트 타입 정의 (CandleClosedEvent, RiskApprovedOrderEvent)",
            "description": "events.py에 두 가지 새 이벤트 타입 추가",
            "details": "CandleClosedEvent:\n- symbol: str\n- interval: str (5m, 15m, 4h, 1d)\n- df: DataFrame (OHLCV 데이터)\n- timestamp: datetime\n- priority: HIGH\n\nRiskApprovedOrderEvent:\n- signal: SignalEvent (원본 신호)\n- approved_quantity: Decimal (리스크 체크 후 승인된 수량)\n- risk_params: Dict (리스크 파라미터)\n- priority: NORMAL",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 2,
            "title": "MarketDataAggregator 컴포넌트 구현",
            "description": "실시간 MarketDataEvent를 OHLCV DataFrame으로 집계하고 CandleClosedEvent 발행",
            "details": "위치: src/trading_bot/data/market_data_aggregator.py\n\n기능:\n1. MarketDataEvent 구독 (각 symbol/interval 조합별)\n2. 인메모리 캔들 데이터 누적 (pandas DataFrame)\n3. 캔들 종료 감지 (interval 기준)\n4. CandleClosedEvent 발행 (DataFrame 포함)\n5. 과거 데이터 초기화 (BinanceClient 통해)\n\n데이터 구조:\n- self._candles: Dict[str, Dict[str, DataFrame]]\n  예: {\"BTCUSDT\": {\"5m\": df, \"15m\": df, ...}}\n\n의존성: BinanceClient, EventBus",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 3,
            "title": "StrategyCoordinator 컴포넌트 구현",
            "description": "멀티 타임프레임 분석 조율 및 전략 실행",
            "details": "위치: src/trading_bot/strategies/strategy_coordinator.py\n\n기능:\n1. CandleClosedEvent 구독 (모든 interval)\n2. 각 interval별 ICT 분석 실행 (ICTAnalyzer)\n3. 멀티 타임프레임 confluence 체크\n4. 전략 실행 (IntegratedStrategySystem)\n5. SignalEvent 발행\n\n로직:\n- 5m 캔들 종료 → 5m ICT 분석 → 즉시 전략 실행 가능\n- 15m/4h/1d 캔들 종료 → 해당 타임프레임 분석 → confluence 업데이트\n- Confluence 조건 충족 시 고품질 신호 생성\n\n의존성: ICTAnalyzer, IntegratedStrategySystem, EventBus",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 4,
            "title": "RiskManager에 SignalEvent 핸들러 추가",
            "description": "SignalEvent 수신 시 리스크 체크 후 RiskApprovedOrderEvent 발행",
            "details": "수정 파일: src/trading_bot/risk/risk_manager.py\n\n추가 기능:\n1. SignalEvent 구독 등록\n2. _handle_signal_event() 메서드 추가:\n   - 포지션 사이즈 계산 (calculate_position_size)\n   - 리스크 체크 (check_new_position_risk)\n   - 통과 시: RiskApprovedOrderEvent 발행\n   - 실패 시: RiskEvent 발행 (위험 경고)\n\n이미 구현된 메서드 활용:\n- calculate_position_size()\n- check_new_position_risk()\n- _calculate_max_position_size()",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 5,
            "title": "OrderExecutor에 자동 주문 실행 추가",
            "description": "RiskApprovedOrderEvent 수신 시 자동으로 주문 실행",
            "details": "수정 파일: src/trading_bot/execution/order_executor.py\n\n추가 기능:\n1. RiskApprovedOrderEvent 구독 등록\n2. _handle_risk_approved_order() 메서드 추가:\n   - SignalEvent에서 주문 파라미터 추출\n   - 승인된 수량으로 주문 생성\n   - 기존 execute_order() 메서드 호출\n\n주문 생성 로직:\n- BUY signal → MARKET BUY order\n- SELL signal → MARKET SELL order\n- stop_loss, take_profit은 PositionTracker가 관리\n\n이미 구현된 메서드 활용:\n- execute_order()\n- _validate_order()",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 6,
            "title": "SystemIntegrator에 새 컴포넌트 등록",
            "description": "MarketDataAggregator, StrategyCoordinator를 SystemIntegrator에 등록",
            "details": "수정 파일: src/trading_bot/system_integrator.py\n\n추가 작업:\n1. _register_data_components()에 MarketDataAggregator 등록\n   - MarketDataProvider 다음 순서\n   - BinanceClient, EventBus 의존성 주입\n\n2. _register_strategy_components()에 StrategyCoordinator 등록\n   - ICTAnalyzer, IntegratedStrategySystem, EventBus 의존성 주입\n\n3. 시작 순서 확인:\n   - DATA layer: BinanceClient → MarketDataProvider → MarketDataAggregator\n   - ANALYSIS layer: ICTAnalyzer\n   - SIGNAL layer: StrategyCoordinator\n   - STRATEGY layer: IntegratedStrategySystem",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 7,
            "title": "Dry-run 모드 구현",
            "description": "실제 주문 없이 전체 워크플로우 검증할 수 있는 dry-run 모드",
            "details": "수정 파일: \n- src/trading_bot/execution/order_executor.py\n- src/trading_bot/config/settings.py\n\n기능:\n1. Config에 dry_run 플래그 추가\n2. OrderExecutor._handle_risk_approved_order()에서:\n   - dry_run=True: 로그만 출력, 주문 미실행\n   - dry_run=False: 실제 주문 실행\n3. 시뮬레이션 주문 이벤트 발행 (테스트용)\n\n로그 포맷:\n[DRY-RUN] Order would be executed: BUY 0.01 BTCUSDT @ MARKET\n[DRY-RUN] Stop Loss: 95000, Take Profit: 105000",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 8,
            "title": "통합 테스트 및 검증",
            "description": "전체 이벤트 체인 통합 테스트",
            "details": "테스트 파일: tests/integration/test_trading_workflow.py\n\n테스트 시나리오:\n1. MarketData 주입 테스트:\n   - 가짜 MarketDataEvent 발행\n   - CandleClosedEvent 생성 확인\n   - ICT 분석 실행 확인\n   - SignalEvent 생성 확인\n\n2. 리스크 체크 테스트:\n   - SignalEvent 발행\n   - RiskApprovedOrderEvent 생성 확인\n   - 리스크 초과 시 거부 확인\n\n3. 주문 실행 테스트 (dry-run):\n   - RiskApprovedOrderEvent 발행\n   - 주문 로그 출력 확인\n   - 실제 API 호출 없음 확인\n\n4. 전체 체인 테스트:\n   - MarketData → Candle → Analysis → Signal → Risk → Order\n   - 각 단계의 이벤트 발행 확인\n   - 타이밍 및 순서 검증",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          }
        ]
      },
      {
        "id": 14,
        "title": "설정 시스템 종합 리팩토링",
        "description": "기능적 YAML 환경 변수 치환 구현, 환경/모드 개념 통합, 명확한 4-환경 구조 (production/paper-mainnet/paper-testnet/development) 확립, 중복 제거, 70개 이상의 비작동 환경 변수 수정",
        "details": "현재 설정 시스템의 근본적인 문제들을 해결하기 위한 종합 리팩토링:\n\n1. **YAML 환경 변수 치환 시스템 구현**\n   - PyYAML SafeLoader 확장으로 ${ENV_VAR} 패턴 지원\n   - 기본값 지원: ${ENV_VAR:default_value}\n   - 중첩 치환 및 순환 참조 방지\n   - 타입 보존 (string, int, float, bool)\n\n2. **환경 구조 표준화**\n   - 4개 환경: production, paper-mainnet, paper-testnet, development\n   - 각 환경별 독립적인 YAML 파일 및 .env 파일\n   - 환경 간 상속 구조: base.yml → environment-specific.yml\n   - ENV 변수로 환경 전환: TRADING_ENV=production\n\n3. **설정 검증 및 타입 안전성**\n   - Pydantic v2 BaseSettings로 전체 설정 모델 재정의\n   - 필수 설정값 검증 및 누락 시 명확한 에러 메시지\n   - 타입 변환 및 검증 (URL, 경로, 포트 번호 등)\n   - 설정값 간 의존성 검증 (예: API 키와 엔드포인트 일치성)\n\n4. **중복 제거 및 정리**\n   - 현재 config/ 디렉토리 전체 분석 및 재구조화\n   - 동일한 설정이 여러 파일에 중복 정의된 것들 통합\n   - 사용하지 않는 설정값 제거\n   - 설정값 네이밍 일관성 확보\n\n5. **환경 변수 문제 해결**\n   - 현재 비작동하는 70개 이상 환경 변수 식별 및 수정\n   - .env.example 파일로 필수 환경 변수 문서화\n   - 환경 변수 검증 스크립트 작성\n   - Docker 환경에서의 환경 변수 주입 최적화\n\n6. **설정 로딩 성능 최적화**\n   - 설정 캐싱 메커니즘 구현\n   - Lazy loading으로 필요한 설정만 로드\n   - 설정 변경 감지 및 Hot reload 지원\n\n7. **마이그레이션 도구**\n   - 기존 설정에서 새 구조로 자동 변환 스크립트\n   - 설정 검증 및 테스트 도구\n   - 환경별 설정 비교 및 차이점 분석 도구",
        "testStrategy": "1. **단위 테스트**\n   - YAML 파서의 환경 변수 치환 기능 테스트\n   - 각 환경별 설정 로딩 테스트\n   - Pydantic 모델 검증 테스트\n   - 설정값 타입 변환 테스트\n\n2. **통합 테스트**\n   - 4개 환경에서 전체 애플리케이션 시작 테스트\n   - 환경 변수 누락 시 에러 처리 테스트\n   - 설정 파일 손상 시 복구 테스트\n   - Docker 환경에서의 설정 로딩 테스트\n\n3. **마이그레이션 검증**\n   - 기존 설정 → 새 설정 변환 정확성 확인\n   - 모든 컴포넌트가 새 설정 구조로 정상 작동하는지 확인\n   - 성능 비교: 이전 vs 새 설정 시스템 로딩 시간\n\n4. **환경별 E2E 테스트**\n   - 각 환경에서 트레이딩 시스템 전체 워크플로우 테스트\n   - API 연결, 데이터베이스 연결, 로깅 시스템 동작 확인\n   - 환경 간 전환 시 데이터 격리 확인",
        "status": "pending",
        "dependencies": [
          9
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "YAML 환경 변수 치환 시스템 구현",
            "description": "PyYAML SafeLoader 확장을 통한 ${ENV_VAR} 패턴 지원 구현. 기본값, 중첩 치환, 순환 참조 방지, 타입 보존 기능 포함",
            "dependencies": [],
            "details": "yaml.safe_load 호출을 대체하는 CustomYAMLLoader 클래스 구현. ${ENV_VAR:default_value} 형식 지원, 환경 변수 존재 검증, 중첩 치환 방지를 위한 depth 추적, 타입 변환 로직(string, int, float, bool) 구현. config_manager.py 내 _load_yaml_with_env_substitution 메서드 추가",
            "status": "done",
            "testStrategy": "환경 변수 치환 단위 테스트, 기본값 처리 검증, 순환 참조 오류 테스트, 타입 보존 확인"
          },
          {
            "id": 2,
            "title": "4-환경 구조 표준화 및 명확화",
            "description": "production(mainnet+live), paper-mainnet(mainnet+simulation), paper-testnet(testnet+simulation), development(testnet+live) 환경 구조 확립",
            "dependencies": [
              "14.1"
            ],
            "details": "환경별 YAML 설정 파일 생성 (base.yml, production.yml, paper-mainnet.yml, paper-testnet.yml, development.yml), 환경 상속 구조 구현, TRADING_ENV 환경 변수 기반 환경 전환 로직 추가, binance testnet/mainnet + dry_run/live execution 매핑 로직 구현",
            "status": "done",
            "testStrategy": "각 환경별 설정 로딩 테스트, 환경 상속 검증, testnet/mainnet 자동 선택 확인"
          },
          {
            "id": 3,
            "title": "CLI 통합 및 --mode 제거",
            "description": "main.py에서 --mode 인자 제거, --env에 paper 선택지 추가, 모드 관련 데드 코드 정리",
            "dependencies": [
              "14.2"
            ],
            "details": "main.py의 argparse에서 --mode 제거, --env choices에 paper-mainnet, paper-testnet 추가, 기존 paper mode 처리 로직 삭제, environment 기반 단일 실행 경로로 통합, 모드 관련 조건문 및 변수 정리",
            "status": "done",
            "testStrategy": "CLI 인자 파싱 테스트, 각 환경별 시작 프로세스 검증, 모드 관련 코드 잔재 확인"
          },
          {
            "id": 4,
            "title": "설정 파일 통합 및 중복 제거",
            "description": "config/ 디렉토리 내 6개 이상 분산된 설정 파일 통합, .env 변수 70개 이상에서 ~15개로 축소",
            "dependencies": [
              "14.2"
            ],
            "details": "기존 trading_config.yaml 분석, 중복된 설정값 식별 및 통합, 환경별 설정 파일로 재구조화, 사용하지 않는 설정값 제거, .env.example 파일 생성 (필수 환경 변수만 포함), 설정값 네이밍 일관성 확보",
            "status": "pending",
            "testStrategy": "설정 파일 로딩 검증, 중복 제거 후 기능성 확인, 환경 변수 필수성 검증"
          },
          {
            "id": 5,
            "title": "Binance testnet/mainnet + dry_run/live 실행 로직 구현",
            "description": "환경에 따른 Binance API 엔드포인트 및 실행 모드 자동 결정 로직 구현",
            "dependencies": [
              "14.3"
            ],
            "details": "BinanceClient에서 환경 기반 testnet/mainnet 자동 선택, OrderExecutor에서 dry_run 모드 처리, production/paper-mainnet → mainnet, paper-testnet/development → testnet 매핑, live/simulation 실행 모드 구분 로직",
            "status": "pending",
            "testStrategy": "각 환경별 Binance 연결 테스트, dry_run 모드 주문 시뮬레이션 검증, 실제 API 호출 제한 확인"
          },
          {
            "id": 6,
            "title": "Pydantic v2 기반 설정 검증 및 타입 안전성",
            "description": "BaseSettings를 활용한 전체 설정 모델 재정의, 필수값 검증, 타입 변환, 의존성 검증 구현",
            "dependencies": [
              "14.4"
            ],
            "details": "TradingBotConfig를 BaseSettings로 변경, 환경 변수 자동 바인딩, 필수 설정값 validator 추가, URL/경로/포트 번호 검증, API 키와 엔드포인트 일치성 검증, 누락 시 명확한 에러 메시지 제공",
            "status": "pending",
            "testStrategy": "Pydantic 모델 검증 테스트, 필수값 누락 에러 처리, 타입 변환 정확성 확인"
          },
          {
            "id": 7,
            "title": "마이그레이션 도구 및 문서화",
            "description": "기존 설정에서 새 구조로 자동 변환 스크립트, 설정 검증 도구, 환경별 비교 도구 개발",
            "dependencies": [
              "14.6"
            ],
            "details": "config_migration.py 스크립트 생성, 기존 trading_config.yaml → 환경별 파일 변환, 설정 검증 스크립트 (validate_config.py), 환경 간 설정 차이점 분석 도구, 마이그레이션 가이드 문서 작성",
            "status": "pending",
            "testStrategy": "마이그레이션 스크립트 정확성 검증, 변환된 설정 파일 기능성 확인, 검증 도구 테스트"
          },
          {
            "id": 8,
            "title": "4개 환경 종합 테스트 및 성능 최적화",
            "description": "모든 환경에서 애플리케이션 시작 테스트, 설정 캐싱, Hot reload, 성능 최적화 구현",
            "dependencies": [
              "14.5",
              "14.6",
              "14.7"
            ],
            "details": "각 환경별 전체 시스템 시작 테스트, 설정 로딩 캐싱 메커니즘 구현, 설정 변경 감지 및 Hot reload, Lazy loading으로 필요한 설정만 로드, Docker 환경에서의 환경 변수 주입 검증, 성능 벤치마크 수립",
            "status": "pending",
            "testStrategy": "4개 환경 전체 시작 테스트, 캐싱 효과 측정, Hot reload 기능 검증, Docker 환경 통합 테스트"
          }
        ]
      }
    ],
    "metadata": {
      "created": "2025-09-27T09:52:28.484Z",
      "updated": "2025-10-03T21:57:24.772Z",
      "description": "Tasks for master context"
    }
  }
}